<?php

namespace Database\Seeders;

use App\Models\User;
use App\Models\News;
use App\Models\Article;
use Illuminate\Database\Seeder;
use Illuminate\Support\Str;

class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        User::factory()->create([
            'name' => 'Admin',
            'email' => 'admin@example.com',
            'password' => bcrypt('password'),
        ]);

        // Новости (юридическая тематика, Россия)
        $news = [
            [
                'title' => 'Добро пожаловать в LavCMS',
                'slug' => 'dobro-pozhalovat-v-lavcms',
                'excerpt' => 'Первая новость вашей CMS.',
                'body' => 'Это простая CMS на Laravel для управления новостями и статьями. Войдите в админ-панель и начните публиковать контент.',
                'image' => null,
            ],
            [
                'title' => 'Внесены изменения в Гражданский кодекс РФ о цифровых правах',
                'slug' => 'izmeneniya-v-gk-rf-o-tsifrovyh-pravah',
                'excerpt' => 'Принят пакет поправок, затрагивающих цифровые права и электронные сделки.',
                'body' => 'Государственная Дума РФ одобрила поправки в Гражданский кодекс, направленные на детализацию регулирования цифровых прав и электронных сделок. Изменения касаются использования единой биометрической системы, электронных подписей и дистанционного заключения договоров. Эксперты ожидают снижения числа споров, связанных с действительностью электронных договоров и подтверждением воли сторон.',
                'image' => null,
            ],
            [
                'title' => 'Конституционный Суд разъяснил порядок перерасчёта штрафов для бизнеса',
                'slug' => 'ks-rf-o-pereraschete-shtrafov-dlya-biznesa',
                'excerpt' => 'КС РФ подчеркнул необходимость соразмерности административных штрафов.',
                'body' => 'Конституционный Суд РФ указал, что при назначении административных штрафов юридическим лицам необходимо учитывать характер правонарушения, его последствия и финансовое положение компании. Формальный подход с назначением максимальных санкций признан противоречащим принципам справедливости и соразмерности. Постановление КС обязательно для применения судами общей юрисдикции и арбитражными судами.',
                'image' => null,
            ],
            [
                'title' => 'Роскомнадзор усилил контроль за локализацией персональных данных',
                'slug' => 'roskomnadzor-kontrol-lokalizatsii-personalnyh-dannyh',
                'excerpt' => 'Операторам персональных данных напомнили о требованиях хранения данных россиян в РФ.',
                'body' => 'Роскомнадзор объявил о проведении новой волны проверок операторов персональных данных на предмет соблюдения требований по локализации баз данных российских граждан. Организациям рекомендовано провести внутренний аудит ИТ-инфраструктуры, проверить маршрутизацию трафика и фактическое местонахождение серверов. За нарушения предусмотрены крупные штрафы и возможная блокировка ресурсов.',
                'image' => null,
            ],
            [
                'title' => 'Верховный Суд уточнил правила расторжения договоров аренды',
                'slug' => 'vs-rf-o-rastorzhenii-dogovorov-arendy',
                'excerpt' => 'Опубликован обзор практики по спорам между арендодателями и арендаторами.',
                'body' => 'Верховный Суд РФ в новом обзоре практики указал, что систематическая просрочка арендатора по оплате аренды может рассматриваться как существенное нарушение договора, даже если прямого указания в договоре нет. При этом суды должны учитывать поведение сторон, попытки досудебного урегулирования и экономическую ситуацию. Обзор направлен на выработку единообразного подхода по всей стране.',
                'image' => null,
            ],
            [
                'title' => 'Принят закон о защите прав потребителей в онлайн-торговле',
                'slug' => 'zakon-o-zashchite-prav-potrebiteley-v-onlain-torgovle',
                'excerpt' => 'Ужесточены требования к интернет-магазинам и маркетплейсам.',
                'body' => 'Новый закон уточняет обязанности продавцов и маркетплейсов при дистанционной продаже товаров и услуг в России. Документ закрепляет требования к содержанию публичной оферты, порядку возврата и обмена товаров, а также к информированию потребителей. Отдельное внимание уделено ответственности платформ-агрегаторов, через которые заключаются сделки между продавцами и покупателями.',
                'image' => null,
            ],
        ];

        foreach ($news as $item) {
            News::create([
                'title' => $item['title'],
                'slug' => $item['slug'],
                'excerpt' => $item['excerpt'],
                'image' => $item['image'],
                'body' => $item['body'],
                'published_at' => now(),
                'is_published' => true,
            ]);
        }

        // Статьи (юридическая тематика, Россия)
        $articles = [
            [
                'title' => 'Как законно обработать персональные данные клиентов в России',
                'slug' => 'kak-zakonno-obrabotat-personalnye-dannye-klientov-v-rossii',
                'excerpt' => 'Пошаговое руководство по соблюдению требований закона о персональных данных.',
                'body' => 'В статье разбираются ключевые понятия закона о персональных данных, правовые основания обработки (согласие, договор, законный интерес), обязанности оператора и типичные ошибки бизнеса. Даются рекомендации по оформлению политики конфиденциальности, уведомлению Роскомнадзора и внедрению внутренних регламентов по работе с ПДн.',
                'image' => null,
            ],
            [
                'title' => 'Договор аренды офиса: на что обратить внимание арендатору',
                'slug' => 'dogovor-arendy-ofisa-na-chto-obratit-vnimanie-arendatoru',
                'excerpt' => 'Краткий разбор ключевых условий договора аренды коммерческой недвижимости.',
                'body' => 'Материал посвящён анализу существенных условий договора аренды по ГК РФ, порядку индексации арендной платы, распределению обязанностей по ремонту и содержанию помещения. Отдельное внимание уделено проверке прав арендодателя через ЕГРН и рискам досрочного расторжения договора по инициативе собственника.',
                'image' => null,
            ],
            [
                'title' => 'Онлайн-торговля в России: юридические требования к интернет-магазину',
                'slug' => 'onlain-torgovlya-v-rossii-trebovaniya-k-internet-magazinu',
                'excerpt' => 'Какие документы и разделы должны быть у сайта, чтобы избежать претензий Роспотребнадзора.',
                'body' => 'Рассматриваются обязательные реквизиты интернет-магазина, структура публичной оферты, порядок информирования покупателя о товаре и условиях возврата. Даются рекомендации по оформлению разделов «Пользовательское соглашение», «Политика конфиденциальности» и по организации досудебного порядка урегулирования споров с потребителями.',
                'image' => null,
            ],
            [
                'title' => 'Трудовой договор с сотрудником: обязательные условия и частые ошибки',
                'slug' => 'trudovoi-dogovor-obyazatelnye-usloviya-i-oshibki',
                'excerpt' => 'Практические советы для работодателя при оформлении трудовых отношений.',
                'body' => 'В статье приведён перечень обязательных условий трудового договора по Трудовому кодексу РФ, рассматриваются особенности установления испытательного срока, описания трудовой функции и системы оплаты труда. Отдельно анализируются риски использования ГПХ вместо трудовых договоров и ответственность за неофициальную выплату заработной платы.',
                'image' => null,
            ],
            [
                'title' => 'Как подготовиться к проверке Роспотребнадзора или Роскомнадзора',
                'slug' => 'kak-podgotovitsya-k-proverke-rospotrebnadzora-ili-roskomnadzora',
                'excerpt' => 'Пошаговый план действий компании при ожидании проверки контролирующих органов.',
                'body' => 'Автор описывает типичные основания для проведения проверок, перечень документов, которые обычно запрашивают инспекторы, и даёт рекомендации по организации документооборота. Также рассматриваются правила поведения сотрудников при общении с проверяющими и алгоритм работы с актом проверки и возможными предписаниями.',
                'image' => null,
            ],
        ];

        foreach ($articles as $item) {
            Article::create([
                'title' => $item['title'],
                'slug' => $item['slug'],
                'excerpt' => $item['excerpt'],
                'image' => $item['image'],
                'body' => $item['body'],
                'published_at' => now(),
                'is_published' => true,
            ]);
        }
    }
}
